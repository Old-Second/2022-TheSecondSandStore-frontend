{"version":3,"file":"pages/Goods-details/index.js","sources":["webpack:///._src_pages_Goods-details_index.jsx","webpack:///._src_Components_Modal1_index.css","webpack:///._src_Components_Modal1_index.jsx","webpack:///._src_Images_favorited.png","webpack:///._src_pages_Goods-details_index.css","webpack:///./src/pages/Goods-details/index.jsx?c65a"],"sourcesContent":["import { Component } from 'react'\nimport { View, Text,Image, Button } from '@tarojs/components'\nimport Taro,{getCurrentInstance} from '@tarojs/taro'\nimport './index.css'\nimport Fetch from '../../Service/fetch'\nimport favorite from '../../Images/favorite.png'\nimport favorited from '../../Images/favorited.png'\nimport back from '../../Images/back.png'\nimport Modal from '../../Components/Modal1'\n\nexport default class Index extends Component {\n  \n    state={\n      good:{},\n      images:[],\n       /* name:'昵称', */ \n       hidden:true,\n       place:'客官，请联系这个QQ号',\n       iffavorite:false,\n       startX: 0,\n       move:0,\n       t:2\n    } \n\n    //在组件在装载发生前被立刻调用\n    componentWillMount () {\n      console.log(111)\n      const params = getCurrentInstance()\n      const id = params.router.params\n      const goods_id = id.goods_id\n      Fetch(\n        `/goods/details/one/${goods_id}`,\n        {},\n        'GET'\n      )\n    .then(res => {\n      console.log(res.data.goods_images_videos)\n      this.setState({\n        images:res.data.goods_images_videos,\n        good : res.data,\n        iffavorite: res.data.if_collected\n      });\n    })\n     }\n  \n    componentDidMount () {\n    }\n  \n    componentWillUnmount () {\n     }\n   \n    componentDidShow () { \n      \n\n  }\n\n\n    componentDidHide () { }\n  \n    handleBack=()=>{\n      Taro.reLaunch({\n        url:'/pages/Square/Square'\n      })\n    }\n\n    showModal=()=>{\n      const ifHidden=this.state.hidden\n      const Hidden=!ifHidden\n      this.setState({hidden:Hidden})\n    }\n\n    changeHidden=()=>{\n      const ifHidden=this.state.hidden\n      const Hidden=!ifHidden\n      this.setState({hidden:Hidden})\n    }\n\n    handlefavorite=()=>{\n      const collect = this.state.iffavorite\n      const Favorite = !collect\n      const collection_id = this.state.good.id\n      this.setState({iffavorite:Favorite}); \n      if(Favorite)\n      {\n        Fetch(\n        `/collection`,\n          {\n            goods_id:collection_id\n          },\n          'POST'\n        )\n        .then(res => {\n          console.log(res);\n        })\n      }\n      else\n      {\n        Fetch(\n          `/collection/${collection_id}`,\n          {},\n          'DELETE'\n        )\n        .then(res => {\n          console.log(res);\n        })\n        \n      }\n    }\n\n//showphoto\nchooiceImg = () => {\n  Taro.chooseMessageFile()\n}\n\nhandleMove=(e)=>{\n  if (e.touches[0].pageX - this.state.startX < -100) {\n    console.log(111)\n      this.leftMove()\n  }\n  if (e.touches[0].pageX - this.state.startX > 100){\n    this.rightMove()\n  }\n}\n\nleftMove = () => {\n  this.setState({\n    move: -50\n  })}\n\n\nrightMove = ()=>{\n  this.setState({\n    move: 0\n  })\n}\n\nhandleStart = (e) => {\n  this.setState({startX: e.touches[0].pageX})\n}\n\n    render () {\n      const {good,place,hidden,iffavorite,move,t} =this.state\n      const name= good.user_nickname//\n      const avater = good.user_image \n      const QQ = good.qq_account//\n      const price = good.price\n      const content = good.content\n      const images = this.state.images//\n      const time = good.time\n      return (\n      <View>\n        <View className='top'>\n        <Image src={back} style={{width:20,height:20,marginLeft:20}} onClick={this.handleBack} />\n        <Image src={iffavorite?favorited:favorite} className='favorite'style={{ width: 22,height: 22,marginLeft:290}} onClick={this.handlefavorite} ></Image>\n        </View>\n        <View className='header'>\n             <View className='avater'>\n              <Image src={`http://${avater}`} /> {/* 暂时为默认头像，后续接受用户信息 */}\n              </View>\n              <Text className='name'>{name}</Text>\n              <Text className='time'>{time}</Text>\n        </View>\n        <View className='description'>\n            <Text className='price'>{price}</Text>\n            <Text className='message'>{content}</Text>\n\n          {/*   <Showphoto item_image={item_image} / */}\n          <View className='photo' onTouchStart={this.handleStart} onTouchMove={this.handleMove}>\n          <View className='row'>\n            {/*photo里直接包image不能实现overflow：hidden，图片会缩放 */}\n           {/* map函数不能直接遍历good.goods_images_videos,只能是state里的 */}\n             {images.map((image)=>{\n               return (\n                 <View key='pic' className='pic' /* style={{ transform :`translateX(${move}vw)`, transition: `transform ${t}s`}} */ >\n                <Image src={`http://${image}`} key='image' className='image' style={{ transform :`translateX(${move}vw)`, transition: `transform ${t}s`}} > </Image>\n                </View>\n               )\n             })} \n            </View>\n          </View>\n            {/* <View className='photo'>\n              <Image \n                src={`http://${item_image ? item_image[0] : null}`}\n              ></Image>\n            </View> */}\n            <Button onClick={this.showModal} >我想要</Button>\n            <Modal hidden={hidden} place={place} QQ={QQ} changeHidden={this.changeHidden} />\n        </View>\n      </View>\n        )\n    }\n  }","// extracted by mini-css-extract-plugin","import { Component } from 'react'\nimport { View, Text} from '@tarojs/components'\nimport './index.css'\n\n\nexport default class Index extends Component {\n        \n    componentWillMount () { }\n  \n    componentDidMount () { }\n  \n    componentWillUnmount () { }\n  \n    componentDidShow () { }\n  \n    componentDidHide () { }\n    \n    handleCancle=()=>{\n        this.props.changeHidden()\n    }\n\n    /* handleConfirm=()=>{\n        \n        this.props.changeHidden()\n    } */\n\n    render () {\n    const{hidden,place,QQ}=this.props\n      return (\n     <View>\n        { hidden ? null : <View class='toast-box' >\n        <View class='toastbg'></View>\n        <View class='showToast'>\n            <View class='toast-title'>\n                <Text onClick={this.handleCancle}>×</Text>\n            </View>\n            <View class='toast-main'>\n                <View class='toast-show'>{place}</View>\n                <Text>{QQ}</Text>\n            </View>\n            {/* <View class='toast-button'>\n                <View class='button1'>\n                    <Button catchtap='cancel' onClick={this.handleCancle} >取消</Button>\n                </View>\n                <View class='button2'>\n                    <Button catchtap='confirm' onClick={this.handleConfirm}>确定</Button>\n                </View>\n            </View> */}\n        </View>\n        </View>}\n      </View>\n      )\n    }\n  }","module.exports = __webpack_public_path__ + \"Images/favorited.png\";","// extracted by mini-css-extract-plugin","import { createPageConfig } from '@tarojs/runtime'\nimport component from \"../../../node_modules/babel-loader/lib/index.js!./index.jsx\"\nvar config = {\"navigationBarTitleText\":\"商品详情\"};\n\n\nvar inst = Page(createPageConfig(component, 'pages/Goods-details/index', {root:{cn:[]}}, config || {}))\n\n\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;AAEA;;;;;;;;;;;;;;;;AAEA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AATA;AACA;AA8CA;AACA;AACA;AADA;;;AAKA;AACA;AACA;AACA;AAAA;AAAA;AAAA;;;AAGA;AACA;AACA;AACA;AAAA;AAAA;AAAA;;;AAGA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AACA;AAAA;AAEA;AAGA;AADA;AAMA;AARA;AAFA;AAeA;AAMA;AANA;AASA;;;AAIA;AACA;;;AAGA;AACA;AACA;AACA;AAAA;AACA;AACA;AAAA;AACA;AACA;;;AAGA;AACA;AACA;AADA;;;AAKA;AACA;AACA;AADA;;;AAKA;AACA;AAAA;AAAA;;;;;;;;AAjHA;AACA;AAAA;AACA;AAAA;AACA;AACA;AACA;AACA;AAMA;AACA;AAAA;AACA;AACA;AACA;AAHA;AAPA;AAaA;;;AAEA;;;AAGA;;;AAGA;;;AAMA;;;AAmFA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AAAA;AACA;AACA;AAAA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAFA;AAIA;AAAA;AACA;AAAA;AACA;AAAA;AADA;AAGA;AAAA;AAAA;AACA;AAAA;AAAA;AALA;AAOA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AAGA;AAAA;AAAA;AAAA;AACA;AAAA;AAIA;AACA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AADA;AAFA;AAHA;AADA;AAkBA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAxBA;AAZA;AAwCA;;;;AApLA;AACA;;;;;;;;;;;;ACXA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACAA;AACA;AACA;;;;AAGA;;;;;;;;;;;;;;;;AAYA;AACA;AACA;AACA;;;;;;AAbA;;;AAEA;;;AAEA;;;AAEA;;;AAEA;;;;AAMA;AACA;AACA;AACA;AAEA;AACA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AAAA;AACA;AAAA;AACA;AAAA;AACA;AAAA;AACA;AAAA;AAAA;AADA;AAGA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AAFA;AAJA;AAFA;AADA;AAuBA;;;;AA/CA;AACA;;;;;;;;;;;;;ACNA;;;;;;;;;;;ACAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;A","sourceRoot":""}