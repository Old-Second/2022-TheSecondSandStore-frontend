{"version":3,"file":"pages/Goods-details/index.js","sources":["webpack:///._src_pages_Goods-details_index.jsx","webpack:///._src_Components_Modal1_index.css","webpack:///._src_Components_Modal1_index.jsx","webpack:///._src_Images_favorited.png","webpack:///._src_pages_Goods-details_index.css","webpack:///./src/pages/Goods-details/index.jsx?c65a"],"sourcesContent":["import { Component } from 'react'\r\nimport { View, Text, Image, Button } from '@tarojs/components'\r\nimport Taro, { getCurrentInstance } from '@tarojs/taro'\r\nimport './index.css'\r\nimport Fetch from '../../Service/fetch'\r\nimport favorite from '../../Images/favorite.png'\r\nimport favorited from '../../Images/favorited.png'\r\nimport back from '../../Images/back.png'\r\nimport Modal from '../../Components/Modal1'\r\n\r\nexport default class Index extends Component {\r\n\r\n  state = {\r\n    good: {},\r\n    images: [],\r\n    /* name:'昵称', */\r\n    hidden: true,\r\n    place: '客官，请联系这个QQ号',\r\n    iffavorite: false,\r\n    startX: 0,\r\n    move: 0,\r\n    t: 2\r\n  }\r\n\r\n  //在组件在装载发生前被立刻调用\r\n  componentWillMount() {\r\n    const params = getCurrentInstance()\r\n    const id = params.router.params\r\n    const goods_id = id.goods_id\r\n    Fetch(\r\n      `/goods/details/one/${goods_id}`,\r\n      {},\r\n      'GET'\r\n    )\r\n      .then(res => {\r\n        // console.log(res.data.goods_images_videos)\r\n        this.setState({\r\n          images: res.data.goods_images_videos,\r\n          good: res.data,\r\n          iffavorite: res.data.if_collected\r\n        });\r\n      })\r\n  }\r\n\r\n  componentDidMount() { }\r\n\r\n  componentWillUnmount() { }\r\n\r\n  componentDidShow() { }\r\n\r\n\r\n  componentDidHide() { }\r\n\r\n  handleBack = () => {\r\n    Taro.reLaunch({\r\n      url: '/pages/Square/Square'\r\n    })\r\n  }\r\n\r\n  showModal = () => {\r\n    const ifHidden = this.state.hidden\r\n    const Hidden = !ifHidden\r\n    this.setState({ hidden: Hidden })\r\n  }\r\n\r\n  changeHidden = () => {\r\n    const ifHidden = this.state.hidden\r\n    const Hidden = !ifHidden\r\n    this.setState({ hidden: Hidden })\r\n  }\r\n\r\n  handlefavorite = () => {\r\n    const collect = this.state.iffavorite\r\n    const Favorite = !collect\r\n    const collection_id = this.state.good.id\r\n    this.setState({ iffavorite: Favorite });\r\n    if (Favorite) {\r\n      Fetch(\r\n        `/collection`,\r\n        {\r\n          goods_id: collection_id\r\n        },\r\n        'POST'\r\n      )\r\n      // .then(res => {\r\n      //   console.log(res);\r\n      // })\r\n    }\r\n    else {\r\n      Fetch(\r\n        `/collection/${collection_id}`,\r\n        {},\r\n        'DELETE'\r\n      )\r\n      // .then(res => {\r\n      //   console.log(res);\r\n      // })\r\n\r\n    }\r\n  }\r\n\r\n  //showphoto\r\n  chooiceImg = () => {\r\n    Taro.chooseMessageFile()\r\n  }\r\n\r\n  handleMove = (e) => {\r\n    if (e.touches[0].pageX - this.state.startX < -100) {\r\n      this.leftMove()\r\n    }\r\n    if (e.touches[0].pageX - this.state.startX > 100) {\r\n      this.rightMove()\r\n    }\r\n  }\r\n\r\n  leftMove = () => {\r\n    this.setState({\r\n      move: -50\r\n    })\r\n  }\r\n\r\n\r\n  rightMove = () => {\r\n    this.setState({\r\n      move: 0\r\n    })\r\n  }\r\n\r\n  handleStart = (e) => {\r\n    this.setState({ startX: e.touches[0].pageX })\r\n  }\r\n\r\n  render() {\r\n    const { good, place, hidden, iffavorite, move, t } = this.state\r\n    const name = good.user_nickname//\r\n    const avater = good.user_image\r\n    const QQ = good.qq_account//\r\n    const price = good.price\r\n    const content = good.content\r\n    const images = this.state.images//\r\n    const time = good.time\r\n    return (\r\n      <View>\r\n        <View className='top'>\r\n          <Image src={back} style={{ width: 20, height: 20, marginLeft: 20 }} onClick={this.handleBack} />\r\n          <Image src={iffavorite ? favorited : favorite} className='favorite' style={{ width: 22, height: 22, marginLeft: 290 }} onClick={this.handlefavorite} ></Image>\r\n        </View>\r\n        <View className='header'>\r\n          <View className='avater'>\r\n            <Image src={`http://${avater}`} /> {/* 暂时为默认头像，后续接受用户信息 */}\r\n          </View>\r\n          <Text className='name'>{name}</Text>\r\n          <Text className='time'>{time}</Text>\r\n        </View>\r\n        <View className='description'>\r\n          <Text className='price'>{price}</Text>\r\n          <Text className='message'>{content}</Text>\r\n\r\n          {/*   <Showphoto item_image={item_image} / */}\r\n          <View className='photo' onTouchStart={this.handleStart} onTouchMove={this.handleMove}>\r\n            <View className='row'>\r\n              {/*photo里直接包image不能实现overflow：hidden，图片会缩放 */}\r\n              {/* map函数不能直接遍历good.goods_images_videos,只能是state里的 */}\r\n              {images.map((image) => {\r\n                return (\r\n                  <View key='pic' className='pic' /* style={{ transform :`translateX(${move}vw)`, transition: `transform ${t}s`}} */ >\r\n                    <Image src={`http://${image}`} key='image' className='image' style={{ transform: `translateX(${move}vw)`, transition: `transform ${t}s` }} > </Image>\r\n                  </View>\r\n                )\r\n              })}\r\n            </View>\r\n          </View>\r\n          {/* <View className='photo'>\r\n              <Image \r\n                src={`http://${item_image ? item_image[0] : null}`}\r\n              ></Image>\r\n            </View> */}\r\n          <Button onClick={this.showModal} >我想要</Button>\r\n          <Modal hidden={hidden} place={place} QQ={QQ} changeHidden={this.changeHidden} />\r\n        </View>\r\n      </View>\r\n    )\r\n  }\r\n}","// extracted by mini-css-extract-plugin","import { Component } from 'react'\r\nimport { View, Text} from '@tarojs/components'\r\nimport './index.css'\r\n\r\n\r\nexport default class Index extends Component {\r\n        \r\n    componentWillMount () { }\r\n  \r\n    componentDidMount () { }\r\n  \r\n    componentWillUnmount () { }\r\n  \r\n    componentDidShow () { }\r\n  \r\n    componentDidHide () { }\r\n    \r\n    handleCancle=()=>{\r\n        this.props.changeHidden()\r\n    }\r\n\r\n    /* handleConfirm=()=>{\r\n        \r\n        this.props.changeHidden()\r\n    } */\r\n\r\n    render () {\r\n    const{hidden,place,QQ}=this.props\r\n      return (\r\n     <View>\r\n        { hidden ? null : <View class='toast-box' >\r\n        <View class='toastbg'></View>\r\n        <View class='showToast'>\r\n            <View class='toast-title'>\r\n                <Text onClick={this.handleCancle}>×</Text>\r\n            </View>\r\n            <View class='toast-main'>\r\n                <View class='toast-show'>{place}</View>\r\n                <Text>{QQ}</Text>\r\n            </View>\r\n            {/* <View class='toast-button'>\r\n                <View class='button1'>\r\n                    <Button catchtap='cancel' onClick={this.handleCancle} >取消</Button>\r\n                </View>\r\n                <View class='button2'>\r\n                    <Button catchtap='confirm' onClick={this.handleConfirm}>确定</Button>\r\n                </View>\r\n            </View> */}\r\n        </View>\r\n        </View>}\r\n      </View>\r\n      )\r\n    }\r\n  }","module.exports = __webpack_public_path__ + \"Images/favorited.png\";","// extracted by mini-css-extract-plugin","import { createPageConfig } from '@tarojs/runtime'\nimport component from \"../../../node_modules/babel-loader/lib/index.js!./index.jsx\"\nvar config = {\"navigationBarTitleText\":\"商品详情\"};\n\n\nvar inst = Page(createPageConfig(component, 'pages/Goods-details/index', {root:{cn:[]}}, config || {}))\n\n\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;AAEA;;;;;;;;;;;;;;;;AAEA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AATA;AACA;AAwCA;AACA;AACA;AADA;;;AAKA;AACA;AACA;AACA;AAAA;AAAA;AAAA;;;AAGA;AACA;AACA;AACA;AAAA;AAAA;AAAA;;;AAGA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AACA;AAAA;AACA;AAGA;AADA;AAMA;AACA;AAVA;AAaA;AAMA;AACA;AAEA;;;AAIA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;;;AAGA;AACA;AACA;AADA;;;AAMA;AACA;AACA;AADA;;;AAKA;AACA;AAAA;AAAA;;;;;;;;AAzGA;AACA;AAAA;AACA;AAAA;AACA;AACA;AACA;AAMA;AACA;AACA;AACA;AACA;AAHA;AAPA;AAaA;;;AAEA;;;AAEA;;;AAEA;;;AAGA;;;AAiFA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AAAA;AACA;AACA;AAAA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAFA;AAIA;AAAA;AACA;AAAA;AACA;AAAA;AADA;AAGA;AAAA;AAAA;AACA;AAAA;AAAA;AALA;AAOA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AAGA;AAAA;AAAA;AAAA;AACA;AAAA;AAIA;AACA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AADA;AAFA;AAHA;AADA;AAkBA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAxBA;AAZA;AAwCA;;;;AA5KA;AACA;;;;;;;;;;;;ACXA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACAA;AACA;AACA;;;;AAGA;;;;;;;;;;;;;;;;AAYA;AACA;AACA;AACA;;;;;;AAbA;;;AAEA;;;AAEA;;;AAEA;;;AAEA;;;;AAMA;AACA;AACA;AACA;AAEA;AACA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AAAA;AACA;AAAA;AACA;AAAA;AACA;AAAA;AACA;AAAA;AAAA;AADA;AAGA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AAFA;AAJA;AAFA;AADA;AAuBA;;;;AA/CA;AACA;;;;;;;;;;;;;ACNA;;;;;;;;;;;ACAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;A","sourceRoot":""}