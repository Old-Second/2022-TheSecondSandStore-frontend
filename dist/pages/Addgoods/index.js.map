{"version":3,"file":"pages/Addgoods/index.js","sources":["webpack:///._src_pages_Addgoods_index.jsx","webpack:///._src_Components_Modal4_index.css","webpack:///._src_Components_Modal4_index.jsx","webpack:///._src_pages_Addgoods_index.css","webpack:///./src/pages/Addgoods/index.jsx?23b7"],"sourcesContent":["import { Component } from 'react'\nimport Taro from '@tarojs/taro'\nimport { View, Textarea, Button, Image, Input, Text } from '@tarojs/components'\nimport './index.css'\nimport Modal4 from '../../Components/Modal4'\n\nexport default class Index extends Component {\n\n  constructor(props) {\n    super(props)\n    this.state = {\n      text: '客官，请留下您的联系方式',\n      place: '请输入您的QQ号',\n      hidden: true,\n      images: [],\n      tempImage: [],\n      price: ''\n    }\n  }\n  componentWillMount () {\n    this.setState({\n      images: [],\n      tempImage: [],\n      price: ''\n    })\n  }\n\n  toTags() {\n    Taro.navigateTo({\n      url: '/pages/Tags/index'\n    })\n  }\n\n  showModal = () => {\n    const ifHidden = this.state.hidden\n    const Hidden = !ifHidden\n    this.setState({ \n      hidden: Hidden ,\n    })\n  }\n\n  changeHidden = () => {\n    const ifHidden = this.state.hidden\n    const Hidden = !ifHidden\n    this.setState({ hidden: Hidden })\n  }\n\n  addImage = () => {\n    const { images, tempImage } = this.state\n    const params = {};\n    params.count = 1;\n    params.sizeType = ['original', 'compressed'];\n    params.sourceType = ['album', 'camera'];\n    Taro.chooseImage(params)\n      .then(res => {\n        const { tempFilePaths } = res\n        const file = Taro.getFileSystemManager().readFileSync(tempFilePaths[0], \"base64\")\n        this.setState({\n          images: [...images, file],\n          tempImage: [...tempImage, tempFilePaths[0]]\n        });\n      })\n  }\n\n  handleText = (e) => {\n    this.setState({ description: e.target.value });\n  }\n\n  handlePrice = (e) => {\n    this.setState({ price: e.target.value });\n  }\n\n  render() {\n    const { tempImage} = this.state\n    return (\n      <View>\n        <View className='AddGoods_container'>\n          <Textarea type='number' placeholder='请描述一下你的宝贝' maxlength={250} className='AddGoods_textarea' value={this.state.description} onInput={this.handleText}></Textarea>\n          <Button onClick={this.toTags} className='AddGoods_tag'>#</Button>\n          <View>\n            {tempImage.map((image) => {\n              return <Image key={image.id} src={image} />\n            })}\n            <View className='AddGoods_addimg' onClick={this.addImage}></View>\n          </View>\n        </View>\n        <View className='AddGoods_price'>\n          定价：\n          <View>\n            <Text>￥</Text>\n            <Input placeholder='00.00' placeholderStyle='color:red' type='number' onInput={this.handlePrice} />\n          </View>\n        </View>\n        <Button className='AddGoods_sell' onClick={this.showModal}>发布</Button>\n        <Modal4 price={this.state.price} images={this.state.images} description={this.state.description} hidden={this.state.hidden} changeHidden={this.changeHidden} text={this.state.text} place={this.state.place} maxlength='10' />\n      </View>\n    )\n  }\n}","// extracted by mini-css-extract-plugin","import { Component } from 'react'\nimport Taro from '@tarojs/taro'\nimport { View, Text, Input, Button } from '@tarojs/components'\nimport './index.css'\nimport Fetch from '../../Service/fetch'\n\nexport default class Index extends Component {\n\n  state = {\n    videos: [],\n    tag_ids: []\n  }\n\n  handleCancle = () => {\n    this.props.changeHidden()\n  }\n\n  getqq = (e) => {\n    this.setState({\n      qq_account: e.target.value\n    })\n  }\n\n  getCurrentTime = () => {\n    var date = new Date();\n    var year = date.getFullYear();\n    var month = date.getMonth() + 1;\n    var day = date.getDate();\n    //时\n    var hour = date.getHours();\n    //分  \n    var minute = date.getMinutes()\n    //秒 \n    var second = date.getSeconds();\n\n    if (month < 10) {\n      month = \"0\" + month;\n    }\n    if (day < 10) {\n      day = \"0\" + day;\n    }\n    if (hour < 10) {\n      hour = \"0\" + hour;\n    }\n    if (minute < 10) {\n      minute = \"0\" + minute;\n    }\n    if (second < 10) {\n      second = \"0\" + second;\n    }\n\n      return year + \"-\" + month + \"-\" + day + \" \" + hour + \":\" + minute + \":\" + second\n  }\n\n\n  handleConfirm = () => {\n    const time=this.getCurrentTime()\n    const { price, description, images } = this.props\n    const { qq_account, videos, tag_ids } = this.state\n    if (qq_account) {\n      Fetch('/goods', { qq_account, price, images, description, tag_ids, videos, time }, 'POST')\n        .then(() => {\n          this.props.changeHidden()\n          Taro.showToast({\n            icon: 'none',\n            title: '发布成功'\n          });\n        })\n    } else {\n      Taro.showToast({\n        icon: 'none',\n        title: '请输入QQ号'\n      });\n    }\n  }\n\n  render() {\n    const { hidden, text, place } = this.props\n    return (\n      <View>\n        {hidden ? null : <View class='toast-box' >\n          <View class='toastbg'></View>\n          <View class='showToast'>\n            <View class='toast-title'>\n              <Text>{text}</Text>\n            </View>\n            <View class='toast-main'>\n              <View class='toast-input'>\n                <Input placeholder={place} onInput={this.getqq} maxlength={15}></Input>\n              </View>\n            </View>\n            <View class='toast-button'>\n              <View class='button1'>\n                <Button catchtap='cancel' onClick={this.handleCancle}>取消</Button>\n              </View>\n              <View class='button2'>\n                <Button catchtap='confirm' onClick={this.handleConfirm}>确定</Button>\n              </View>\n            </View>\n          </View>\n        </View>}\n      </View>\n    )\n  }\n}","// extracted by mini-css-extract-plugin","import { createPageConfig } from '@tarojs/runtime'\nimport component from \"../../../node_modules/babel-loader/lib/index.js!./index.jsx\"\nvar config = {\"navigationBarTitleText\":\"发布商品\"};\n\n\nvar inst = Page(createPageConfig(component, 'pages/Addgoods/index', {root:{cn:[]}}, config || {}))\n\n\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;;;;AAEA;;;;;AAEA;AAAA;AACA;AADA;AACA;AAAA;AACA;AAFA;AA0BA;AACA;AACA;AAAA;AACA;AADA;AA5BA;AACA;AADA;AAkCA;AACA;AACA;AAAA;AAAA;AAAA;AApCA;AACA;AADA;AAwCA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AAAA;AACA;AACA;AAFA;AAJA;AA7CA;AACA;AADA;AAyDA;AAAA;AAAA;AAzDA;AACA;AADA;AA6DA;AAAA;AAAA;AA7DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AANA;AAFA;AAUA;AACA;;;AAAA;AACA;AACA;AACA;AACA;AAHA;AAKA;;;AAEA;AACA;AACA;AADA;AAGA;;;AAyCA;AACA;AACA;AACA;AACA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AACA;AAEA;AAAA;AAAA;AADA;AAGA;AAAA;AAAA;AAJA;AAHA;AAUA;AAAA;AAEA;AACA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAFA;AAFA;AAOA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAnBA;AAsBA;;;;AA3FA;AACA;;;;;;;;;;;;ACPA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACAA;AACA;AACA;AACA;AACA;;;;AAEA;;;;;;;;;;;;;;;;AAEA;AACA;AACA;AAFA;AACA;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AADA;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AACA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AACA;AAAA;AACA;AACA;AAFA;AAIA;AACA;AACA;AACA;AACA;AAFA;AAIA;AACA;AACA;;;;;;AACA;AACA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AAAA;AACA;AAAA;AACA;AAAA;AACA;AAAA;AACA;AAAA;AADA;AAGA;AAAA;AACA;AAAA;AACA;AAAA;AAAA;AAAA;AADA;AADA;AAKA;AAAA;AACA;AAAA;AACA;AAAA;AAAA;AAAA;AADA;AAGA;AAAA;AACA;AAAA;AAAA;AAAA;AADA;AAJA;AATA;AAFA;AADA;AAwBA;;;;AAjGA;AACA;;;;;;;;;;;;ACPA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;A","sourceRoot":""}