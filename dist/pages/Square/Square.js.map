{"version":3,"file":"pages/Square/Square.js","sources":["webpack:///._src_pages_Square_Square.jsx","webpack:///./src/pages/Square/Square.jsx?e7fb","webpack:///._src_pages_Square_square.css"],"sourcesContent":["import { Component } from 'react'\nimport { View,Input,Image} from '@tarojs/components'\nimport Taro from '@tarojs/taro'\nimport './square.css'\nimport image from '../../Images/搜索.png'\nimport Item from '../../Components/Item'\nimport Fetch from '../../Service/fetch'\n\nexport default class Square extends Component {\n  constructor() {\n    super(...arguments);\n    this.state = {\n      goods: [],\n      bottomFlag: false,\n      isFirst: true,\n    };\n  }\n\n  componentWillMount () { }\n\n  componentDidMount () { }\n\n  componentWillUnmount () { }\n\n  componentDidShow () { \n    const isFirst = this.state.isFirst\n    if (isFirst==1) {\n      this.getGoods();\n    }\n  }\n\n  componentDidHide () { }\n\n  getGoods=()=>{\n    let newGoods = this.state.goods;\n    Fetch(\n      '/api/v1/goods/details/all',\n    )\n    .then(data => {\n      if (data.data !== null) {\n            newGoods = newGoods.concat(data.data);\n            Taro.stopPullDownRefresh();\n            Taro.hideNavigationBarLoading();\n            this.setState({\n              goods: data.data,\n              isFirst: false });\n        }else{\n          Taro.showToast({\n            title: '到底啦！',\n            duration: 2000\n          });\n          Taro.stopPullDownRefresh();\n          Taro.hideNavigationBarLoading();\n          this.setState({\n            bottomFlag: true\n          });\n        }\n      })\n  }\n\n   onPullDownRefresh(){\n    Taro.showNavigationBarLoading();\n    this.getGoods();\n  }\n \n  /* goDtl = (goods_id) => {\n    const id = goods_id;\n    Taro.redirectTo({\n      url:'/pages/Goods-details/index?goods_id='+id\n    })\n  }\n */\n  Toresearch=()=>{\n    Taro.redirectTo({\n      url:'/pages/Search/index'\n    })\n  }\n  render () {\n    const { bottomFlag,goods} = this.state;\n    \n    \n    return (\n      <View className='ground'>\n        <View className='header'>\n           <Input type='text' placeholder='' onClick={this.Toresearch} />\n           <Image src={`http://${image}`} style={{width:32,height:32,marginTop:20}} />\n        </View>\n        <View className='show'>\n          {goods.map((good) => {\n              return (\n              <Item content={good.content} price={good.price} iffavorite={good.if_collected} username={good.user_nickname} QQ={good.qq_account} user_image={good.user_image} item_image={good.goods_images_videos} goods_id={good.id} if_sell={good.if_sell} if_del={good.if_del} key='item' />\n            )\n          })}\n        </View>\n        {bottomFlag && <View className='bottomBox' >到底啦！</View>}\n      </View>\n     \n      \n      )\n  }\n}\n    ","import { createPageConfig } from '@tarojs/runtime'\nimport component from \"../../../node_modules/babel-loader/lib/index.js!./Square.jsx\"\nvar config = {\"navigationBarTitleText\":\"主页\"};\n\n\nvar inst = Page(createPageConfig(component, 'pages/Square/Square', {root:{cn:[]}}, config || {}))\n\n\n","// extracted by mini-css-extract-plugin"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;;;;AAEA;;;;;AACA;AAAA;AACA;AADA;AACA;AAAA;AACA;AAFA;AAyBA;AACA;AAIA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AAFA;AAJA;AAQA;AACA;AACA;AAFA;AAIA;AACA;AACA;AAAA;AACA;AADA;AAGA;AArBA;AA1BA;AACA;AADA;AAgEA;AACA;AADA;AAhEA;AACA;AACA;AACA;AACA;AACA;AAHA;AAFA;AAOA;AACA;;;AACA;;;AAEA;;;AAEA;;;AAEA;AACA;AACA;AAAA;AACA;AACA;AACA;;;AAEA;;;AA6BA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAKA;AACA;AAAA;AAAA;AAGA;AACA;AAAA;AACA;AAAA;AACA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAFA;AAIA;AAAA;AAEA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAFA;AADA;AAOA;AAAA;AAAA;AAZA;AAiBA;;;;AA3FA;AACA;;;;;;;;;;;;;;ACTA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;ACPA;;;;A","sourceRoot":""}