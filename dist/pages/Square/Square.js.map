{"version":3,"file":"pages/Square/Square.js","sources":["webpack:///._src_pages_Square_Square.jsx","webpack:///./src/pages/Square/Square.jsx?e7fb","webpack:///._src_pages_Square_square.css"],"sourcesContent":["import { Component } from 'react'\r\nimport { View,Input,Image} from '@tarojs/components'\r\nimport Taro from '@tarojs/taro'\r\nimport './square.css'\r\nimport image from '../../Images/搜索.png'\r\nimport Item from '../../Components/Item'\r\nimport Fetch from '../../Service/fetch'\r\n\r\nexport default class Square extends Component {\r\n  constructor() {\r\n    super(...arguments);\r\n    this.state = {\r\n      goods: [],\r\n      bottomFlag: false,\r\n      isFirst: true,\r\n    };\r\n  }\r\n\r\n  componentWillMount () { }\r\n\r\n  componentDidMount () { }\r\n\r\n  componentWillUnmount () { }\r\n\r\n  componentDidShow () { \r\n    const isFirst = this.state.isFirst\r\n    if (isFirst==1) {\r\n      this.getGoods();\r\n    }\r\n  }\r\n\r\n  componentDidHide () { }\r\n\r\n  getGoods=()=>{\r\n    let newGoods = this.state.goods;\r\n    Fetch(\r\n      '/goods/details/all',\r\n    )\r\n    .then(data => {\r\n      if (data.data !== null) {\r\n            newGoods = newGoods.concat(data.data);\r\n            Taro.stopPullDownRefresh();\r\n            Taro.hideNavigationBarLoading();\r\n            this.setState({\r\n              goods: data.data,\r\n              isFirst: false });\r\n        }else{\r\n          Taro.showToast({\r\n            title: '到底啦！',\r\n            duration: 2000\r\n          });\r\n          Taro.stopPullDownRefresh();\r\n          Taro.hideNavigationBarLoading();\r\n          this.setState({\r\n            bottomFlag: true\r\n          });\r\n        }\r\n      })\r\n  }\r\n\r\n   onPullDownRefresh(){\r\n    Taro.showNavigationBarLoading();\r\n    this.getGoods();\r\n  }\r\n \r\n  /* goDtl = (goods_id) => {\r\n    const id = goods_id;\r\n    Taro.redirectTo({\r\n      url:'/pages/Goods-details/index?goods_id='+id\r\n    })\r\n  }\r\n */\r\n  Toresearch=()=>{\r\n    Taro.redirectTo({\r\n      url:'/pages/Search/index'\r\n    })\r\n  }\r\n  render () {\r\n    const { bottomFlag,goods} = this.state;\r\n    \r\n    \r\n    return (\r\n      <View className='ground'>\r\n        <View className='header'>\r\n           <Input type='text' placeholder='' onClick={this.Toresearch} />\r\n           <Image src={image} style={{width:32,height:32,marginTop:20}} />\r\n        </View>\r\n        <View className='show'>\r\n          {goods.map((good) => {\r\n              return (\r\n              <Item content={good.content} price={good.price} iffavorite={good.if_collected} username={good.user_nickname} QQ={good.qq_account} user_image={good.user_image} item_image={good.goods_images_videos} goods_id={good.id} if_sell={good.if_sell} if_del={good.if_del} key='item' />\r\n            )\r\n          })}\r\n        </View>\r\n        {bottomFlag && <View className='bottomBox' >到底啦！</View>}\r\n      </View>\r\n     \r\n      \r\n      )\r\n  }\r\n}\r\n    ","import { createPageConfig } from '@tarojs/runtime'\nimport component from \"../../../node_modules/babel-loader/lib/index.js!./Square.jsx\"\nvar config = {\"navigationBarTitleText\":\"主页\"};\n\n\nvar inst = Page(createPageConfig(component, 'pages/Square/Square', {root:{cn:[]}}, config || {}))\n\n\n","// extracted by mini-css-extract-plugin"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;;;;AAEA;;;;;AACA;AAAA;AACA;AADA;AACA;AAAA;AACA;AAFA;AAyBA;AACA;AAIA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AAFA;AAJA;AAQA;AACA;AACA;AAFA;AAIA;AACA;AACA;AAAA;AACA;AADA;AAGA;AArBA;AA1BA;AACA;AADA;AAgEA;AACA;AADA;AAhEA;AACA;AACA;AACA;AACA;AACA;AAHA;AAFA;AAOA;AACA;;;AACA;;;AAEA;;;AAEA;;;AAEA;AACA;AACA;AAAA;AACA;AACA;AACA;;;AAEA;;;AA6BA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAKA;AACA;AAAA;AAAA;AAGA;AACA;AAAA;AACA;AAAA;AACA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAFA;AAIA;AAAA;AAEA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAFA;AADA;AAOA;AAAA;AAAA;AAZA;AAiBA;;;;AA3FA;AACA;;;;;;;;;;;;;;ACTA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;ACPA;;;;A","sourceRoot":""}